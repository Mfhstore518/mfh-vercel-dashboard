cd mfh-vercel
cat > api/complete_system.py << 'EOF'
"""
MFH STORE COMPLETE SYSTEM v1.0
Professional E-commerce System with AI Assistant
"""
from http.server import BaseHTTPRequestHandler
import json
import hashlib
from datetime import datetime, timedelta
import random
import uuid
import re
import time

# ========== DATABASE CLASS ==========
class MFHDatabase:
    _instance = None
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance.init_database()
        return cls._instance
    
    def init_database(self):
        # Users Database
        self.users = [
            {
                "id": "admin_001",
                "username": "admin",
                "password": hashlib.sha256("Mfhh@404".encode()).hexdigest(),
                "role": "admin",
                "shop_name": "MFH STORE ADMIN",
                "phone": "081998593873",
                "email": "admin@mfhstore.id",
                "status": "active",
                "created_at": "2025-01-01",
                "last_login": datetime.now().isoformat()
            },
            {
                "id": "seller_001",
                "username": "seller1",
                "password": hashlib.sha256("Seller123".encode()).hexdigest(),
                "role": "seller",
                "shop_name": "TOKO DIGITAL VVIP",
                "phone": "081234567890",
                "email": "seller1@mfhstore.id",
                "status": "active",
                "created_at": "2025-01-15",
                "last_login": datetime.now().isoformat()
            }
        ]
        
        # Products Database
        self.products = [
            {
                "id": "prod_001",
                "name": "REKENING BCA FULL VERIFIED",
                "description": "Rekening BCA dengan mobile banking aktif, KYC verified, bisa semua transaksi",
                "price": 350000,
                "category": "bank_indonesia",
                "status": "active",
                "stock": "unlimited",
                "features": ["Mobile banking", "Transfer semua bank", "KYC verified", "Garansi 30 hari"],
                "processing_time": "20-30 menit",
                "created_at": "2025-01-01"
            },
            {
                "id": "prod_002",
                "name": "E-WALLET DANA PREMIUM",
                "description": "Akun DANA verified premium dengan limit tinggi, QRIS enabled",
                "price": 150000,
                "category": "ewallet",
                "status": "active",
                "stock": "unlimited",
                "features": ["Verified premium", "QRIS payment", "High limit", "Instant transfer"],
                "processing_time": "30 menit",
                "created_at": "2025-01-01"
            }
        ]
        
        # Orders Database
        self.orders = []
        
        # Chat Messages
        self.chat_messages = []
        
        # System Settings
        self.settings = {
            "store_name": "MFH STORE ID",
            "store_slogan": "AGEN DIGITAL VVIP TERPERCAYA",
            "store_phone": "081998593873",
            "store_email": "admin@mfhstore.id",
            "store_address": "Jl. MH Thamrin, Jakarta Pusat",
            "whatsapp_url": "https://wa.me/6281998593873",
            "telegram_url": "https://t.me/Mfhh_Store_ID",
            "ai_enabled": True,
            "ai_name": "MFH Assistant",
            "auto_reply": True,
            "business_hours": "24/7",
            "currency": "IDR",
            "tax_rate": 0,
            "payment_methods": ["Bank Transfer", "QRIS", "E-Wallet"],
            "shipping_methods": ["Digital Delivery"],
            "return_policy": "Garansi 30 hari uang kembali",
            "privacy_policy": "Data customer dijamin aman 100%"
        }
    
    # ========== USER MANAGEMENT ==========
    def authenticate(self, username, password):
        hashed_pw = hashlib.sha256(password.encode()).hexdigest()
        for user in self.users:
            if (user["username"] == username and 
                user["password"] == hashed_pw and 
                user["status"] == "active"):
                
                # Update last login
                user["last_login"] = datetime.now().isoformat()
                return user
        return None
    
    def create_user(self, user_data):
        user_id = f"{user_data['role']}_{str(uuid.uuid4())[:8]}"
        
        new_user = {
            "id": user_id,
            "username": user_data["username"],
            "password": hashlib.sha256(user_data["password"].encode()).hexdigest(),
            "role": user_data["role"],
            "shop_name": user_data.get("shop_name", f"Toko {user_data['username']}"),
            "phone": user_data.get("phone", ""),
            "email": user_data.get("email", ""),
            "status": "active",
            "created_at": datetime.now().isoformat(),
            "last_login": datetime.now().isoformat()
        }
        
        self.users.append(new_user)
        return new_user
    
    def update_user_password(self, username, new_password):
        for user in self.users:
            if user["username"] == username:
                user["password"] = hashlib.sha256(new_password.encode()).hexdigest()
                return True
        return False
    
    def get_user_by_id(self, user_id):
        for user in self.users:
            if user["id"] == user_id:
                return user
        return None
    
    def get_all_sellers(self):
        return [user for user in self.users if user["role"] == "seller" and user["status"] == "active"]
    
    # ========== PRODUCT MANAGEMENT ==========
    def add_product(self, product_data):
        product_id = f"prod_{str(uuid.uuid4())[:8]}"
        
        new_product = {
            "id": product_id,
            "name": product_data["name"],
            "description": product_data.get("description", ""),
            "price": product_data["price"],
            "category": product_data.get("category", "other"),
            "status": "active",
            "stock": product_data.get("stock", "unlimited"),
            "features": product_data.get("features", []),
            "processing_time": product_data.get("processing_time", "1-2 jam"),
            "created_at": datetime.now().isoformat()
        }
        
        self.products.append(new_product)
        return new_product
    
    def update_product(self, product_id, update_data):
        for i, product in enumerate(self.products):
            if product["id"] == product_id:
                for key, value in update_data.items():
                    if key in product:
                        self.products[i][key] = value
                return self.products[i]
        return None
    
    # ========== ORDER MANAGEMENT ==========
    def create_order(self, order_data):
        order_id = f"MFH{datetime.now().strftime('%Y%m%d%H%M%S')}{random.randint(100,999)}"
        
        new_order = {
            "id": order_id,
            "customer_name": order_data["customer_name"],
            "customer_phone": order_data["customer_phone"],
            "customer_email": order_data.get("customer_email", ""),
            "product_id": order_data["product_id"],
            "product_name": order_data.get("product_name", ""),
            "amount": order_data["amount"],
            "status": "pending",
            "payment_method": order_data.get("payment_method", "bank_transfer"),
            "seller_id": order_data.get("seller_id", ""),
            "notes": order_data.get("notes", ""),
            "created_at": datetime.now().isoformat(),
            "updated_at": datetime.now().isoformat()
        }
        
        self.orders.append(new_order)
        
        # Add welcome message from AI
        self.add_chat_message({
            "order_id": order_id,
            "sender": "AI Assistant",
            "message": f"üéâ **Order #{order_id} Diterima!**\n\nTerima kasih sudah order di MFH Store. Admin akan segera memproses order Anda dalam 5-10 menit.\n\nüìû Butuh bantuan cepat? WA: 0819-9859-3873",
            "is_ai": True
        })
        
        return new_order
    
    def update_order_status(self, order_id, status):
        for order in self.orders:
            if order["id"] == order_id:
                order["status"] = status
                order["updated_at"] = datetime.now().isoformat()
                return order
        return None
    
    def assign_order_to_seller(self, order_id, seller_id):
        for order in self.orders:
            if order["id"] == order_id:
                order["seller_id"] = seller_id
                order["updated_at"] = datetime.now().isoformat()
                return order
        return None
    
    # ========== CHAT SYSTEM ==========
    def add_chat_message(self, message_data):
        message_id = str(uuid.uuid4())
        
        new_message = {
            "id": message_id,
            "order_id": message_data["order_id"],
            "sender": message_data["sender"],
            "message": message_data["message"],
            "is_ai": message_data.get("is_ai", False),
            "timestamp": datetime.now().isoformat()
        }
        
        self.chat_messages.append(new_message)
        return new_message
    
    def get_chat_messages(self, order_id):
        return [msg for msg in self.chat_messages if msg["order_id"] == order_id]
    
    # ========== AI ASSISTANT ==========
    def ai_response(self, message, context=None):
        """AI Assistant untuk merespon customer"""
        message_lower = message.lower()
        
        # Greetings
        if any(word in message_lower for word in ['hai', 'halo', 'hello', 'hi', 'selamat']):
            return "Halo! Saya AI Assistant MFH Store. Ada yang bisa saya bantu hari ini? üòä"
        
        # Product inquiry
        elif any(word in message_lower for word in ['produk', 'jual', 'barang', 'layanan']):
            return "Kami menyediakan berbagai produk digital:\n\nüìå **Rekening Bank** (BCA, BRI, Mandiri, dll)\nüìå **E-Wallet** (DANA, GOPAY, OVO)\nüìå **Rekening Luar Negeri** (Malaysia, Singapura)\nüìå **Crypto Accounts** (Binance, Indodax)\n\nMau informasi produk mana?"
        
        # Price inquiry
        elif any(word in message_lower for word in ['harga', 'berapa', 'biaya', 'tarif']):
            return "Harga mulai dari Rp 150.000 - Rp 400.000 tergantung produk.\n\nüí∞ **Rekening Indonesia:** Rp 350K-400K\nüí∞ **E-Wallet:** Rp 150K-200K\nüí∞ **Rekening Luar:** Rp 400K-450K\n\nDetail harga bisa tanya langsung ke Admin ya! üìû"
        
        # Process time
        elif any(word in message_lower for word in ['lama', 'proses', 'cepat', 'waktu']):
            return "‚ö° **PROSES SUPER CEPAT!**\n\n‚Ä¢ 0-5 menit: Konfirmasi pembayaran\n‚Ä¢ 5-20 menit: Proses pembuatan\n‚Ä¢ 20-30 menit: Produk siap & dikirim\n\nAdmin online 24/7 untuk proses cepat!"
        
        # Warranty
        elif any(word in message_lower for word in ['garansi', 'jaminan', 'aman', 'percaya']):
            return "üõ°Ô∏è **GARANSI 100% AMAN!**\n\n‚úÖ Meta Business Verified sejak 2020\n‚úÖ 5000+ customer puas ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n‚úÖ Garansi 30 hari uang kembali\n‚úÖ Support 24/7 via WhatsApp\n‚úÖ Legalitas jelas & transparan"
        
        # Payment
        elif any(word in message_lower for word in ['bayar', 'pembayaran', 'transfer', 'qris']):
            return "üí≥ **METODE PEMBAYARAN:**\n\nüè¶ Bank Transfer (BCA, BRI, Mandiri)\nüì± QRIS (DANA, OVO, GOPAY)\nüíé E-Wallet (ShopeePay, LinkAja)\n\nSetelah transfer, konfirmasi ke Admin ya!"
        
        # Contact
        elif any(word in message_lower for word in ['kontak', 'admin', 'wa', 'whatsapp']):
            return "üìû **HUBUNGI ADMIN:**\n\nWhatsApp: 0819-9859-3873\nTelegram: @Mfhh_Store_ID\nInstagram: @mfhstoreid\n\nAdmin siap membantu 24/7! üïê"
        
        # Order status
        elif any(word in message_lower for word in ['status', 'order', 'pesanan', 'track']):
            return "Untuk cek status order, silakan berikan:\n1. Order ID Anda, atau\n2. Nomor WhatsApp yang digunakan order\n\nAdmin akan cek dan beri update! üì¶"
        
        # Default response
        else:
            return "Terima kasih pesannya! Admin akan segera membalas.\n\nUntuk pertanyaan urgent, langsung hubungi:\nüì± WA: 0819-9859-3873\n\nAtau tanyakan tentang:\n‚Ä¢ Produk yang dijual\n‚Ä¢ Harga & proses\n‚Ä¢ Garansi & keamanan\n‚Ä¢ Cara order üòä"

# ========== GLOBAL DATABASE INSTANCE ==========
db = MFHDatabase()

# ========== HTTP HANDLER ==========
class MFHCompleteHandler(BaseHTTPRequestHandler):
    
    # ========== CONFIGURATION ==========
    def __init__(self, *args, **kwargs):
        self.admin_paths = ['/admin', '/admin/', '/admin/dashboard', '/admin/users', '/admin/products', '/admin/settings']
        self.seller_paths = ['/seller', '/seller/', '/seller/dashboard', '/seller/orders']
        super().__init__(*args, **kwargs)
    
    # ========== REQUEST HANDLING ==========
    def do_GET(self):
        """Handle GET requests"""
        try:
            path = self.path.split('?')[0]
            
            # ========== PUBLIC PAGES ==========
            if path == '/':
                self.serve_homepage()
            
            elif path == '/admin/login':
                self.serve_admin_login()
            
            elif path == '/seller/login':
                self.serve_seller_login()
            
            elif path == '/webstore':
                self.serve_webstore_page()
            
            # ========== ADMIN DASHBOARD ==========
            elif path == '/admin/dashboard':
                self.serve_admin_dashboard()
            
            elif path == '/admin/users':
                self.serve_admin_users()
            
            elif path == '/admin/products':
                self.serve_admin_products()
            
            elif path == '/admin/settings':
                self.serve_admin_settings()
            
            elif path == '/admin/orders':
                self.serve_admin_orders()
            
            # ========== SELLER DASHBOARD ==========
            elif path == '/seller/dashboard':
                self.serve_seller_dashboard()
            
            elif path == '/seller/orders':
                self.serve_seller_orders()
            
            elif path == '/seller/profile':
                self.serve_seller_profile()
            
            # ========== API ENDPOINTS ==========
            elif path == '/api/ping':
                self.api_ping()
            
            elif path == '/api/stats':
                self.api_stats()
            
            elif path == '/api/products':
                self.api_products()
            
            elif path == '/api/orders':
                self.api_orders()
            
            elif path == '/api/sellers':
                self.api_sellers()
            
            elif path == '/api/settings':
                self.api_settings()
            
            # ========== STATIC FILES ==========
            elif path.endswith('.css') or path.endswith('.js') or path.endswith('.png'):
                self.serve_static_file(path)
            
            else:
                self.send_error(404, "Page not found")
        
        except Exception as e:
            self.send_error(500, f"Server error: {str(e)}")
    
    def do_POST(self):
        """Handle POST requests"""
        try:
            path = self.path
            
            # ========== AUTHENTICATION ==========
            if path == '/api/auth/login':
                self.api_login()
            
            elif path == '/api/auth/logout':
                self.api_logout()
            
            elif path == '/api/auth/register':
                self.api_register()
            
            # ========== ORDER MANAGEMENT ==========
            elif path == '/api/orders/create':
                self.api_create_order()
            
            elif path == '/api/orders/update':
                self.api_update_order()
            
            elif path == '/api/orders/assign':
                self.api_assign_order()
            
            # ========== USER MANAGEMENT ==========
            elif path == '/api/users/create':
                self.api_create_user()
            
            elif path == '/api/users/update':
                self.api_update_user()
            
            elif path == '/api/users/delete':
                self.api_delete_user()
            
            # ========== PRODUCT MANAGEMENT ==========
            elif path == '/api/products/create':
                self.api_create_product()
            
            elif path == '/api/products/update':
                self.api_update_product()
            
            # ========== CHAT & AI ==========
            elif path == '/api/chat/send':
                self.api_send_chat()
            
            elif path == '/api/chat/ai':
                self.api_ai_response()
            
            # ========== SETTINGS ==========
            elif path == '/api/settings/update':
                self.api_update_settings()
            
            # ========== WEBHOOK ==========
            elif path == '/api/webhook':
                self.api_webhook()
            
            else:
                self.send_error(404, "API endpoint not found")
        
        except Exception as e:
            self.send_error(500, f"API error: {str(e)}")
    
    # ========== API METHODS ==========
    def api_ping(self):
        """Check API status"""
        self.send_json_response({
            "status": "online",
            "service": "MFH Store Complete System",
            "version": "1.0.0",
            "timestamp": datetime.now().isoformat(),
            "uptime": "24/7",
            "database": "active"
        })
    
    def api_stats(self):
        """Get system statistics"""
        stats = {
            "total_users": len(db.users),
            "active_sellers": len([u for u in db.users if u["role"] == "seller" and u["status"] == "active"]),
            "total_products": len(db.products),
            "active_products": len([p for p in db.products if p["status"] == "active"]),
            "total_orders": len(db.orders),
            "pending_orders": len([o for o in db.orders if o["status"] == "pending"]),
            "completed_orders": len([o for o in db.orders if o["status"] == "completed"]),
            "revenue_today": 0,
            "ai_enabled": db.settings["ai_enabled"],
            "system_status": "operational"
        }
        self.send_json_response(stats)
    
    def api_login(self):
        """Authenticate user"""
        data = self.get_request_json()
        username = data.get("username")
        password = data.get("password")
        
        user = db.authenticate(username, password)
        
        if user:
            # Create session token
            token = hashlib.sha256(f"{username}{datetime.now()}".encode()).hexdigest()
            
            self.send_json_response({
                "success": True,
                "token": token,
                "user": {
                    "id": user["id"],
                    "username": user["username"],
                    "role": user["role"],
                    "shop_name": user.get("shop_name", ""),
                    "phone": user.get("phone", ""),
                    "email": user.get("email", "")
                },
                "message": "Login successful"
            })
        else:
            self.send_json_response({
                "success": False,
                "error": "Invalid username or password"
            }, 401)
    
    def api_create_order(self):
        """Create new order"""
        data = self.get_request_json()
        
        required_fields = ["customer_name", "customer_phone", "product_id", "amount"]
        for field in required_fields:
            if field not in data:
                self.send_json_response({
                    "success": False,
                    "error": f"Missing required field: {field}"
                }, 400)
                return
        
        order = db.create_order(data)
        
        self.send_json_response({
            "success": True,
            "order": order,
            "message": "Order created successfully"
        })
    
    def api_create_user(self):
        """Create new user (admin only)"""
        data = self.get_request_json()
        
        required_fields = ["username", "password", "role"]
        for field in required_fields:
            if field not in data:
                self.send_json_response({
                    "success": False,
                    "error": f"Missing required field: {field}"
                }, 400)
                return
        
        # Check if username exists
        for user in db.users:
            if user["username"] == data["username"]:
                self.send_json_response({
                    "success": False,
                    "error": "Username already exists"
                }, 400)
                return
        
        user = db.create_user(data)
        
        self.send_json_response({
            "success": True,
            "user": {
                "id": user["id"],
                "username": user["username"],
                "role": user["role"],
                "shop_name": user.get("shop_name", ""),
                "status": user["status"]
            },
            "password": data["password"],  # Return plain password for admin
            "message": "User created successfully"
        })
    
    def api_webhook(self):
        """Webhook for external orders (from webstore)"""
        data = self.get_request_json()
        
        # Extract order data from webstore
        order_data = {
            "customer_name": data.get("customer", "Customer"),
            "customer_phone": data.get("phone", ""),
            "customer_email": data.get("email", ""),
            "product_id": "prod_custom",
            "product_name": data.get("product", "Unknown Product"),
            "amount": data.get("amount", 0),
            "payment_method": data.get("payment_method", "bank_transfer"),
            "notes": data.get("notes", "From webstore")
        }
        
        order = db.create_order(order_data)
        
        self.send_json_response({
            "success": True,
            "order_id": order["id"],
            "message": "Order received from webstore",
            "timestamp": datetime.now().isoformat()
        })
    
    # ========== HTML PAGES ==========
    def serve_homepage(self):
        """Serve main homepage"""
        html = '''<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFH STORE COMPLETE SYSTEM</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 100%);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #0066ff, #8a2be2, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 102, 255, 0.3);
        }
        
        .tagline {
            font-size: 1.2rem;
            color: #a0a0ff;
            margin-bottom: 50px;
            letter-spacing: 2px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .dashboard-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .dashboard-card:hover {
            transform: translateY(-10px);
            border-color: #0066ff;
            box-shadow: 0 20px 40px rgba(0, 102, 255, 0.2);
        }
        
        .card-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #0066ff;
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .card-desc {
            color: #cccccc;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(45deg, #0066ff, #8a2be2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 102, 255, 0.3);
        }
        
        .system-info {
            margin-top: 60px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border-left: 4px solid #00ffaa;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        @media (max-width: 768px) {
            .logo { font-size: 2.5rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .card-icon { font-size: 2.5rem; }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            <i class="fas fa-store"></i> MFH STORE
        </div>
        
        <div class="tagline">
            PROFESSIONAL E-COMMERCE SYSTEM WITH AI ASSISTANT
        </div>
        
        <div class="dashboard-grid">
            <!-- Admin Dashboard -->
            <div class="dashboard-card" onclick="window.location.href='/admin/login'">
                <div class="card-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <div class="card-title">
                    ADMIN DASHBOARD
                </div>
                <div class="card-desc">
                    Full control system. Manage sellers, products, orders, and system settings. Complete business management.
                </div>
                <button class="btn">
                    <i class="fas fa-sign-in-alt"></i> ADMIN LOGIN
                </button>
            </div>
            
            <!-- Seller Dashboard -->
            <div class="dashboard-card" onclick="window.location.href='/seller/login'">
                <div class="card-icon">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="card-title">
                    SELLER DASHBOARD
                </div>
                <div class="card-desc">
                    Operational dashboard for sellers. Manage orders, chat with customers, and track sales performance.
                </div>
                <button class="btn">
                    <i class="fas fa-sign-in-alt"></i> SELLER LOGIN
                </button>
            </div>
            
            <!-- Webstore -->
            <div class="dashboard-card" onclick="window.location.href='/webstore'">
                <div class="card-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="card-title">
                    CUSTOMER WEBSTORE
                </div>
                <div class="card-desc">
                    Modern e-commerce store with AI chat assistant. Product catalog, checkout system, and order tracking.
                </div>
                <button class="btn">
                    <i class="fas fa-external-link-alt"></i> VIEW STORE
                </button>
            </div>
            
            <!-- API Documentation -->
            <div class="dashboard-card" onclick="window.location.href='/api/ping'">
                <div class="card-icon">
                    <i class="fas fa-code"></i>
                </div>
                <div class="card-title">
                    API SYSTEM
                </div>
                <div class="card-desc">
                    RESTful API for integration. Webhook support, real-time data, and external system integration.
                </div>
                <button class="btn">
                    <i class="fas fa-plug"></i> TEST API
                </button>
            </div>
        </div>
        
        <div class="system-info">
            <h3 style="margin-bottom: 20px; color: #00ffaa;">
                <i class="fas fa-star"></i> SYSTEM FEATURES
            </h3>
            <div class="info-grid">
                <div class="info-item">
                    <i class="fas fa-robot" style="color: #0066ff; font-size: 2rem; margin-bottom: 10px;"></i>
                    <div style="font-weight: 600;">AI CHAT ASSISTANT</div>
                    <div style="font-size: 0.9rem; color: #aaa;">24/7 Customer Support</div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-sync-alt" style="color: #00ffaa; font-size: 2rem; margin-bottom: 10px;"></i>
                    <div style="font-weight: 600;">REAL-TIME SYNC</div>
                    <div style="font-size: 0.9rem; color: #aaa;">Instant Data Update</div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-shield-alt" style="color: #ffcc00; font-size: 2rem; margin-bottom: 10px;"></i>
                    <div style="font-weight: 600;">SECURE SYSTEM</div>
                    <div style="font-size: 0.9rem; color: #aaa;">Encrypted & Protected</div>
                </div>
                
                <div class="info-item">
                    <i class="fas fa-mobile-alt" style="color: #ff66ff; font-size: 2rem; margin-bottom: 10px;"></i>
                    <div style="font-weight: 600;">MOBILE READY</div>
                    <div style="font-size: 0.9rem; color: #aaa;">Responsive Design</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 50px; color: #666; font-size: 0.9rem;">
            <p>MFH STORE COMPLETE SYSTEM v1.0 | ¬© 2025 Professional E-commerce Solution</p>
            <p>Support: 0819-9859-3873 | Email: admin@mfhstore.id</p>
        </div>
    </div>
    
    <script>
        // Auto redirect to admin login after 10 seconds
        setTimeout(() => {
            document.querySelector('.dashboard-card:nth-child(1)').style.animation = 'pulse 1s infinite';
        }, 10000);
    </script>
</body>
</html>'''
        self.send_html_response(html)
    
    def serve_admin_dashboard(self):
        """Serve admin dashboard"""
        # This would be a complete admin dashboard
        # For now, return a placeholder
        html = '''<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard - MFH Store</title>
    <style>
        body { background: #0a0a1a; color: white; padding: 20px; text-align: center; }
        h1 { color: #0066ff; margin: 50px 0; }
        .btn { background: #0066ff; color: white; padding: 15px 30px; border-radius: 10px; text-decoration: none; margin: 10px; }
    </style>
</head>
<body>
    <h1>üöÄ ADMIN DASHBOARD COMING SOON!</h1>
    <p>Complete admin panel with all features is being built...</p>
    <a href="/" class="btn">‚Üê Back to Home</a>
</body>
</html>'''
        self.send_html_response(html)
    
    def serve_admin_login(self):
        """Serve admin login page"""
        html = '''<!DOCTYPE html>
<html>
<head>
    <title>Admin Login - MFH Store</title>
    <style>
        body { background: #0a0a1a; color: white; padding: 20px; text-align: center; }
        h1 { color: #0066ff; margin: 50px 0; }
        .login-box { max-width: 400px; margin: 0 auto; background: rgba(255,255,255,0.05); padding: 40px; border-radius: 20px; }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 10px; border: 1px solid #0066ff; background: transparent; color: white; }
        button { background: #0066ff; color: white; padding: 15px; width: 100%; border: none; border-radius: 10px; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üîê ADMIN LOGIN</h1>
    <div class="login-box">
        <input type="text" id="username" placeholder="Username" value="admin">
        <input type="password" id="password" placeholder="Password" value="Mfhh@404">
        <button onclick="login()">LOGIN</button>
    </div>
    
    <script>
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            fetch('/api/auth/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({username, password})
            })
            .then(r => r.json())
            .then(data => {
                if(data.success) {
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    window.location.href = '/admin/dashboard';
                } else {
                    alert('Login failed: ' + data.error);
                }
            });
        }
    </script>
</body>
</html>'''
        self.send_html_response(html)
    
    def serve_webstore_page(self):
        """Serve customer webstore page"""
        html = '''<!DOCTYPE html>
<html>
<head>
    <title>Webstore - MFH Store</title>
    <style>
        body { background: #0a0a1a; color: white; padding: 20px; text-align: center; }
        h1 { color: #0066ff; margin: 50px 0; }
    </style>
</head>
<body>
    <h1>üõí CUSTOMER WEBSTORE COMING SOON!</h1>
    <p>Modern e-commerce store with AI chat assistant...</p>
    <a href="/" class="btn">‚Üê Back to Home</a>
</body>
</html>'''
        self.send_html_response(html)
    
    # ========== HELPER METHODS ==========
    def get_request_json(self):
        """Parse JSON from request body"""
        content_length = int(self.headers.get('Content-Length', 0))
        if content_length:
            return json.loads(self.rfile.read(content_length).decode('utf-8'))
        return {}
    
    def send_json_response(self, data, status=200):
        """Send JSON response"""
        self.send_response(status)
        self.send_header('Content-type', 'application/json')
        self.send_header('Access-Control-Allow-Origin', '*')
        self.end_headers()
        self.wfile.write(json.dumps(data, indent=2).encode('utf-8'))
    
    def send_html_response(self, html, status=200):
        """Send HTML response"""
        self.send_response(status)
        self.send_header('Content-type', 'text/html')
        self.end_headers()
        self.wfile.write(html.encode('utf-8'))
    
    def send_error(self, code, message):
        """Send error response"""
        self.send_response(code)
        self.send_header('Content-type', 'application/json')
        self.end_headers()
        error_response = {
            "error": True,
            "code": code,
            "message": message,
            "timestamp": datetime.now().isoformat()
        }
        self.wfile.write(json.dumps(error_response).encode('utf-8'))

# ========== MAIN EXECUTION ==========
def handler(request, context):
    """AWS Lambda handler (for Vercel compatibility)"""
    return MFHCompleteHandler(request, context)

if __name__ == "__main__":
    # For local testing
    from http.server import HTTPServer
    server = HTTPServer(('localhost', 8080), MFHCompleteHandler)
    print("üöÄ MFH Complete System running on http://localhost:8080")
    server.serve_forever()
EOF
